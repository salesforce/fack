<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
  <% end %>
  <div class="flex justify-between items-center">
    <h1 class="font-bold text-3xl text-sky-800">API Tokens</h1>
    <%= link_to "New", new_api_token_path, class: "rounded-lg p-2 bg-sky-600 text-white block font-light" %>
  </div>
  <div id="api_tokens" class="min-w-full">
    <div class="flex justify-between font-light text-sm text-stone-500 mt-3">
      <div class="w-1/6 py-2">
        NAME
      </div>
      <div class="w-1/6 py-2 ">
        CREATED (USER)
      </div>
      <div class="w-1/6 py-2 ">
        LAST USED
      </div>
      <div class="w-1/6 py-2 ">
        TOKEN
      </div>
      <div class="w-1/6 py-2 ">
        ACTIONS
      </div>
    </div>
    <% @api_tokens.each do |api_token| %>
      <hr class="">
      <div class="flex justify-between py-1 text-sm hover:bg-stone-100">
        <div class="w-1/6 py-2">
          <%= api_token.name %>
        </div>
        <div class="w-1/6 py-2">
          <%= time_ago_in_words(api_token.created_at) %> ago
          by           <%= api_token.user.email %>
        </div>
        <div class="w-1/6 py-2">
          <% if api_token.last_used %>
            <%= time_ago_in_words(api_token.last_used) %> ago
          <% end %>
        </div>
        <div class="w-1/6 py-2">
          <%= api_token.token.last(4) %>
        </div>
        <div class="w-1/6 py-2 flex ">
          <%= button_to "Delete", api_token_path(api_token), method: :delete, class: "rounded-lg py-2 px-3 bg-gray-200 hover:bg-gray-300 text-red-500 font-medium" %>
          <%= link_to "Edit", edit_api_token_path(api_token), class: "rounded-lg ml-2 py-2 px-3 bg-gray-200 hover:bg-gray-300 font-medium" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
