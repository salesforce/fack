<div class="">
  <div class="container mx-auto px-4 py-4">
    <!-- Header Section -->
    <div class="mb-8">
      <h1 class="font-bold text-3xl text-sky-800 mb-4">What Would You Like to Know?</h1>
      <div class="rounded-lg shadow-lg p-4 mx-auto w-full border border-stone-200 bg-white">
        <%= render "questions/form", question: Question.new %>
      </div>
    </div>
    <!-- Activity Section -->
    <h1 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
      My Activity
    </h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <!-- Questions -->
      <div class="bg-white rounded-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-gray-500 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
            </svg>
            Questions
          </h2>
          <%= link_to questions_path, class: "inline-flex items-center px-3 py-1 border border-sky-500 text-sky-500 text-sm font-medium rounded-md hover:bg-sky-500 hover:text-white transition-colors duration-200" do %>
            More
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          <% end %>
        </div>
        <div class="">
          <% if @recent_questions.any? %>
            <% @recent_questions.each do |question| %>
              <%= render "dashboard/list_item",
                path: question_path(question),
                title: question.question.truncate(50),
                subtitle: "Asked #{time_ago_in_words(question.created_at)} ago" %>
            <% end %>
          <% else %>
            <p class="text-gray-400 italic">No recent questions</p>
          <% end %>
        </div>
      </div>
      <!-- Chats -->
      <div class="bg-white rounded-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-gray-500 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155" />
            </svg>
            Chats
          </h2>
          <%= link_to chats_path, class: "inline-flex items-center px-3 py-1 border border-sky-500 text-sky-500 text-sm font-medium rounded-md hover:bg-sky-500 hover:text-white transition-colors duration-200" do %>
            More
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          <% end %>
        </div>
        <div class="">
          <% if @recent_chats.any? %>
            <% @recent_chats.each do |chat| %>
              <%= render "dashboard/list_item",
                path: chat_path(chat),
                title: chat.first_message.truncate(50) || "Chat ##{chat.id}",
                subtitle: "Started #{time_ago_in_words(chat.created_at)} ago" %>
            <% end %>
          <% else %>
            <p class="text-gray-400 italic">No recent chats</p>
          <% end %>
        </div>
      </div>
      
      <!-- Recently Viewed Documents -->
      <div class="bg-white rounded-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-gray-500 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
            Documents
          </h2>
          <%= link_to documents_path, class: "inline-flex items-center px-3 py-1 border border-sky-500 text-sky-500 text-sm font-medium rounded-md hover:bg-sky-500 hover:text-white transition-colors duration-200" do %>
            More
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          <% end %>
        </div>
        <div class="">
          <% if @recently_viewed_documents.any? %>
            <% @recently_viewed_documents.each do |document| %>
              <% viewed_item = document.viewed_items.find_by(user: current_user) %>
              <%= render "dashboard/list_item",
                path: document_path(document),
                title: document.title.truncate(50),
                subtitle: "Viewed #{time_ago_in_words(viewed_item.viewed_at)} ago" %>
            <% end %>
          <% else %>
            <p class="text-gray-400 italic">No recently viewed documents</p>
          <% end %>
        </div>
      </div>
      <!-- Recently Viewed Libraries -->
      <div class="bg-white rounded-lg p-6 border border-gray-300">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-gray-500 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
            </svg>
            Libraries
          </h2>
          <%= link_to libraries_path, class: "inline-flex items-center px-3 py-1 border border-sky-500 text-sky-500 text-sm font-medium rounded-md hover:bg-sky-500 hover:text-white transition-colors duration-200" do %>
            More
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          <% end %>
        </div>
        <div class="">
          <% if @recently_viewed_libraries.any? %>
            <% @recently_viewed_libraries.each do |library| %>
              <% viewed_item = library.viewed_items.find_by(user: current_user) %>
              <%= render "dashboard/list_item",
                path: library_path(library),
                title: library.name.truncate(50),
                subtitle: "Viewed #{time_ago_in_words(viewed_item.viewed_at)} ago" %>
            <% end %>
          <% else %>
            <p class="text-gray-400 italic">No recently viewed libraries</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>